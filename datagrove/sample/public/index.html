<!DOCTYPE html>
<html lang="en" class='dark'>

<head>
  <meta charset="UTF-8" />
  <link rel="shortcut icon" type="image/svg" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Datagrove</title>
</head>

<body class='dark:text-white dark:bg-black'>
  <div id="app"></div>
  <!-- <script type="module" src="/src/main.tsx"></script> -->
  <button id="input">send</button>
  <select id="user_id">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>
  <button id="error">error</button>
  <button id="glob">glob</button>
  <a href="./download" target="_blank">download</a>
  <pre id="output"></pre>
  <script>
    if ('serviceWorker' in navigator) {
        var scope = location.pathname.replace(/\/[^\/]+$/, '/');
        navigator.serviceWorker.register('sw.js', { scope })
                 .then(function(reg) {
                     reg.addEventListener('updatefound', function() {
                         var installingWorker = reg.installing;
                         console.log('A new service worker is being installed:',
                                     installingWorker);
                     });
                     // registration worked
                     console.log('Registration succeeded. Scope is ' + reg.scope);
                 }).catch(function(error) {
                     // registration failed
                         console.log('Registration failed with ' + error);
                 });
    }
    
    function get(url) {
        fetch(url)
          .then(res => res.text())
          .then(text => output.innerHTML = text);
    }
    
    input.addEventListener('click', () => {
        get(`./user/${user_id.value}`);
    });
    
    error.addEventListener('click', () => {
        get(`./error`);
    });
    
    glob.addEventListener('click', () => {
        get(`./__fs__/hello/world/name/this/is/fine`);
    });
    </script>
</body>

</html>